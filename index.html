<html>
	<head>
		<title>Lyrictionary</title>
		<style type="text/css">
			input { width: 50%; height: 30%; }
		</style>
	</head>
	<body>
		<input type="text" speech x-webkit-speech>
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="contentflow/contentflow.js"></script>
		<script type="text/javascript" src="jwplayer/jwplayer.js"></script>
		<script type="text/javascript">
		    var ContentFlow = new ContentFlow('ContentFlow');
			if(navigator.onLine) {
				var musixmatchURL = 'http://api.musixmatch.com/ws/1.1/track.search?f_has_lyrics=1&apikey=72972dafed8a3b90df4e80d022e47642';
				var input = document.querySelector('[x-webkit-speech]');
				//input.addEventListener('change', inputChange, false);
				input.addEventListener('webkitspeechchange', function (e) {
					if(e.results && e.type === 'webkitspeechchange') {
						var searchTerm = encodeURI(e.results[0].utterance);
						if(searchTerm.length > 0) {
						    $.getJSON(musixmatchURL + '&q_lyrics=' + searchTerm + '&format=JSONP&callback=?', function(data) {
						        console.log(data);
						        if(data.message.header.status_code == "200") {
						            if(data.message.body.track_list) {
						                makeCoverflow(data.message.body.track_list);
						            }
						        }
						    });
							//getMusixLyrics(searchTerm);
						}
					}
				}, false);
				
				function sayThis(text) {
					
					// start for 
					
					var a = document.createElement('audio');
      				a.src = 'http://translate.google.com/translate_tts?tl=en&q=' + escape(phrase);
      				a.load();
      				$('body').append(a);
						
				}
				
				function getMusixLyrics(searchTerm) {
				    $.getJSON(musixmatchURL + '&q_lyrics=' + searchTerm + '&format=JSONP&callback=?', function(data) {
				        if(data.message.header.status_code == "200") {
				            if(data.message.body.track_list) {
				                makeCoverflow(data.message.body.track_list);
				            }
				        }
				    });
				}
				
				function showLyrics(lyricid) {
				    alert(lyricid);
				}
				
				function makeCoverflow(data) {
				    /*console.log(ContentFlow.getNumberOfItems());
				    if(ContentFlow.getNumberOfItems() > 0) {
				        console.log('Many items');
				        $.each($('#itemcontainer img'), function(i, el) {
    				        console.log(ContentFlow.rmItem(el));
    				    });
    				    $('#itemcontainer img').remove();
				    }*/
				    for(var i = 0, c = data.length; i < c; i++) {
				        $('#itemcontainer').append('<img class="item" src="'+data[i].track.album_coverart_100x100+'" title="'+data[i].track.track_name+' by '+data[i].track.artist_name+'" />');
				    }
				    $.each($('#itemcontainer img'), function(i, el) {
				        ContentFlow.addItem(el, 'last');
				    });
				}
				
				function getYoutubeVideo(searchq) {
					$.getJSON('http://gdata.youtube.com/feeds/api/videos?orderby=relevance&max-results=10&v=2&category=Music&format=5&client=playlistify&q='+searchq+'&alt=json-in-script&callback=?', function(data) {
							console.log(data);
							if(!data) {
								
								alert('no data from youtube');
								
							} else {	
						  var urlembed = data.feed.entry[0].content.src;
							}	
							
							jwplayer('videocontainer').setup({
						    'flashplayer': 'jwplayer/player.swf',
						    'id': 'videocontainer',
						    'width': '480',
						    'height': '270',
						    'file': urlembed,
						    'plugins': {
						       'captions-2': {
						           'file': 'captions.xml'
						       }
						    }
						  });
							console.log(urlembed);		        	
			        	
					});
					
					
			
			
				}
			}
		</script>
		<a href="javascript:void(0);" onclick="getMusixLyrics('neuken');">test</a>
		<div id="ContentFlow" class="ContentFlow">
		    <div class="loadIndicator"><div class="indicator"></div></div>
		    <div class="flow"></div>
		    <div class="globalCaption"></div>
		    <div class="scrollbar"><div class="slider"><div class="position"></div></div></div>
		</div>
		<p id="videocontainer">The player will be placed here</p>
		<div id="itemcontainer" style="visibility:hidden;"></div>
	</body>
</html>