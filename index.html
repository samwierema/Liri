<html>
	<head>
		<title>Lyrictionary</title>
		<style type="text/css">
			input { width: 50%; height: 30%; }
		</style>
	</head>
	<body>
		<input type="text" speech x-webkit-speech>
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
		<!-- <script src="http://www.jeremyckahn.com/blog/codebucket/flowbox/js/cflow/contentflow.js"></script> -->
		<script type="text/javascript">
			if(navigator.onLine) {
				var musixmatchURL = 'http://api.musixmatch.com/ws/1.1/track.search?f_has_lyrics=1&apikey=72972dafed8a3b90df4e80d022e47642';
				var input = document.querySelector('[x-webkit-speech]');
				//input.addEventListener('change', inputChange, false);
				input.addEventListener('webkitspeechchange', inputChange, false);
				
				
				function inputChange(e) {
					if(e.results && e.type === 'webkitspeechchange') {
						var searchTerm = encodeURI(e.results[0].utterance);
						if(searchTerm.length > 0) {
							getMusixLyrics(searchTerm);
						}
					}
				}
				
				function getMusixLyrics(searchTerm) {
					$.getJSON(musixmatchURL + '&q_lyrics=' + searchTerm + '&format=JSONP&callback=?', function(data) {
								console.log(data);
								
								
									// most probs we should do some error checking first?

									if(data.message.header.status_code == "200") {
								
										// data message body track list kijken if exist 
										
										if(data.message.body.track_list) {
											makeCoverflow(data.message.body.track_list);										
										}
									
									}

							});
				}
				
				function showLyrics(lyricid) {
					
					alert(lyricid);
					
				}
				
				function makeCoverflow(data) {
				
					console.log(data);
					var list = $("#flow-container");
					
					list.html('');
					
					var tracklistcount = data.length;
					
					for (var i = 0; i < tracklistcount; i++) {
						list.append('<a href="javascript:void(0)" onclick="showLyrics('+data[i].track.lyrics_id+');" class="item"><img class="content" src="'+data[i].track.album_coverart_100x100+'" /><div class="caption">'+data[i].track.track_name+' by '+data[i].track.artist_name+'</div></a>');
					}
					
					
					
				}
			
			}
			
			
		</script>
		<a href="javascript:void(0);" onclick="getMusixLyrics('neuken');">test</a>
		<div id="flow" class="ContentFlow">
		            <div id="flow-container" class="flow">
		            </div>
		</div>
		<div ></div>
	</body>
</html>